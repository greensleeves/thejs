var global=window||global;global.class_factory=function(a,b){var c=a[b][b],d=a[b],e=d.extend,f=d.our,g;if(f)for(g in f)c[g]=f[g];delete d.our;delete d.extend;delete d[b];c.prototype=d;c.prototype.constructor=c;if(e)for(d=e.length;d--;)extend(c,e[d]);a[b]=c};global.namespace=function(a,b){var c=a.split("."),d=c.length,e=0,f=global,g;for(e;e<d-1;e++)f[c[e]]=f[c[e]]||{},f=f[c[e]];if(void 0!==b.require)b.require.push(function(){delete b.require;for(g in b)b.hasOwnProperty(g)&&(class_factory(b,g),f[c[d-1]]=f[c[d-1]]||{},f[c[d-1]][g]=b[g])}),include.apply(global,b.require);else for(g in b)b.hasOwnProperty(g)&&(class_factory(b,g),f[c[d-1]]=f[c[d-1]]||{},f[c[d-1]][g]=b[g])};global.extend=function(a,b){var c=a.prototype,d,e=function(){};e.prototype=b.prototype;a.prototype=new e;a.prototype.constructor=a;for(d in c)a.prototype[d]=c[d];a.superclass=b.prototype};global.include=function(){var a=arguments,b=a.length-1;"function"==typeof a[b]&&include.data.funcs.push(a[b]);for(var c=0;c<b;c++)a=arguments[c],include.data.cache[a]||(include.data.start+=1,include.data.cache[a]=1,create_script(URL+a.replace(/\./ig,"/")+".js",include.data.callback,include.data.callback))};include.data={start:0,ready:0,funcs:[],cache:{}};
include.data.callback=function(){include.data.ready+=1;if(include.data.ready==include.data.start)for(var a=include.data.funcs.length,b;-1<(a-=1);)b=include.data.funcs.pop(),b()};var child_number=1;Object.prototype.children={length:0};Object.prototype._id={};Object.prototype.addChild=function(a){a._id||(a._id=child_number++);this.children[a._id]=a._id;this.children.length+=1;a.parent=this};Object.prototype.removeChild=function(a){this.children[a._id]&&(this.children[a._id].parent=void 0,this.children[a._id]=void 0,this.children.length-=1)};Object.prototype.on=function(a,b){this._listener=this._listener||{};this._listener[a]=this._listener[a]||[];this._listener[a].push(b)};Object.prototype.play=function(a){var b=Array.prototype.slice.call(arguments);b.shift();if(void 0!=this._listener&&void 0!=this._listener[a])for(var c=this._listener[a].length;0<=(c-=1);)this._listener[a][c].apply(this,b)};function create_script(a,b,c){var d=document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript";e.src=a;e.done=!1;e.onload=e.onreadystatechange=function(){if(!e.done&&(!global.readyState||"loaded"===global.readyState||"complete"===global.readyState))e.done=!0,b(),e.onload=e.onreadystatechange=null};e.onerror=c;d.appendChild(e)};(function(){function a(){if(!a.onse){a.onse=!0;var b=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";d.src=URL+"index.js";b.appendChild(d)}}var b=document.getElementsByTagName("script"),b=b[b.length-1].src.split("?")[0];global.URL=b.split("/").slice(0,-1).join("/")+"/";a.onse=!1;document.addEventListener?document.addEventListener("DOMContentLoaded",a,!1):document.attachEvent&&document.attachEvent("onreadystatechange",a)})();
